(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5836:function(e,t,s){Promise.resolve().then(s.bind(s,8780))},8780:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),r=s(2265),i=s(7107),n=s(6463),l=s(7138),o=s(6264);function c(e){let{score:t}=e,s=t>=80?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":t>=65?"bg-blue-500/20 text-blue-400 border-blue-500/30":t>=50?"bg-amber-500/20 text-amber-400 border-amber-500/30":"bg-red-500/20 text-red-400 border-red-500/30";return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold border ".concat(s),children:t})}function d(e){return e?e>=1e6?"$".concat((e/1e6).toFixed(1),"M"):e>=1e3?"$".concat((e/1e3).toFixed(0),"K"):"$".concat(e):"$—"}function x(e){let{selected:t,analyses:s,onClose:r}=e,i=s.filter(e=>t.includes(e.id));if(i.length<2)return null;let n=e=>e>=80?"text-emerald-400":e>=65?"text-blue-400":e>=50?"text-amber-400":"text-red-400",l=2===i.length?"grid-cols-2":"grid-cols-3";return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-gray-950/95 backdrop-blur-xl overflow-auto",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-white font-bold text-xl",children:"Deal Comparison"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white text-sm px-4 py-2 border border-gray-700 rounded-xl transition-colors",children:"Close ✕"})]}),(0,a.jsx)("div",{className:"grid gap-4 ".concat(l),children:i.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold text-sm",children:e.listing_title}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-0.5",children:e.listing_type||"Website"})]}),(0,a.jsxs)("div",{className:"text-center py-2",children:[(0,a.jsx)("p",{className:"text-5xl font-black ".concat(n(null!==(t=e.flip_score)&&void 0!==t?t:0)),children:null!==(s=e.flip_score)&&void 0!==s?s:"—"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"FlipScore™"})]}),(0,a.jsx)("div",{className:"space-y-1.5",children:[{label:"Asking",value:d(e.asking_price)},{label:"Mo. Profit",value:d(e.monthly_profit)},{label:"Multiple",value:"".concat((e.asking_price/(12*(e.monthly_profit||1))).toFixed(1),"x")}].map(e=>(0,a.jsxs)("div",{className:"flex justify-between bg-gray-800/50 rounded-lg px-3 py-2",children:[(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:e.label}),(0,a.jsx)("span",{className:"text-white text-sm font-semibold",children:e.value})]},e.label))}),e.score_breakdown&&(0,a.jsx)("div",{className:"space-y-1.5",children:Object.entries(e.score_breakdown).filter(e=>{let[t]=e;return"overall"!==t}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs mb-0.5",children:[(0,a.jsx)("span",{className:"text-gray-500 capitalize",children:t}),(0,a.jsx)("span",{className:n(s),children:s})]}),(0,a.jsx)("div",{className:"h-1 bg-gray-800 rounded-full",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all",style:{width:"".concat(s,"%"),backgroundColor:s>=80?"#10b981":s>=65?"#60a5fa":s>=50?"#f59e0b":"#ef4444"}})})]},t)})})]},e.id)})})]})})}function u(){var e;let t=(0,i.e)(),s=(0,n.useRouter)(),[u,m]=(0,r.useState)(null),[h,g]=(0,r.useState)([]),[p,b]=(0,r.useState)(!0),[f,y]=(0,r.useState)("analyses"),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)([]),[_,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),[D,A]=(0,r.useState)({});async function P(e){C(e);try{let t=await (0,o.S)("/api/share",{method:"POST",body:JSON.stringify({analysis_id:e})}),s=await t.json();if(s.token){let t="".concat(window.location.origin,"/report?t=").concat(s.token);A(s=>({...s,[e]:t})),await navigator.clipboard.writeText(t).catch(()=>{})}}finally{C(null)}}(0,r.useEffect)(()=>{!async function(){let{data:{user:e}}=await t.auth.getUser();if(!e){s.push("/login");return}let[{data:a},{data:r}]=await Promise.all([t.from("profiles").select("*").eq("id",e.id).single(),t.from("analyses").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50)]);m(a),g(r||[]),b(!1)}()},[]);let F=async()=>{await t.auth.signOut(),s.push("/")};if(p)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-400",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),"Loading your workspace..."]})});let U=(null==u?void 0:u.subscription_tier)||"free",z=null!==(e=null==u?void 0:u.analyses_used_this_month)&&void 0!==e?e:0,E="free"===U?3:"starter"===U?25:"pro"===U?100:9999,I=h.length?Math.round(h.reduce((e,t)=>{var s;return e+(null!==(s=t.flip_score)&&void 0!==s?s:0)},0)/h.length):0;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-950 text-white",children:[_&&(0,a.jsx)(x,{selected:N,analyses:h,onClose:()=>k(!1)}),(0,a.jsx)("header",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-7 h-7 bg-gradient-to-br from-indigo-500 to-violet-600 rounded-lg flex items-center justify-center text-xs font-black",children:"F"}),(0,a.jsx)("span",{className:"font-bold text-white",children:"FlipFlow"})]}),(0,a.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:["analyses","scout"].map(e=>(0,a.jsx)("button",{onClick:()=>y(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors capitalize ".concat(f===e?"bg-gray-800 text-white":"text-gray-400 hover:text-white"),children:"scout"===e?"\uD83E\uDD16 Scout Agent":"\uD83D\uDCCA "+e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.default,{href:"/analyze",className:"bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium px-4 py-1.5 rounded-lg transition-colors",children:"+ New Analysis"}),(0,a.jsx)("button",{onClick:F,className:"text-gray-500 hover:text-gray-300 text-sm transition-colors",children:"Sign out"})]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:["analyses"===f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4 mb-8",children:[{label:"Analyses This Month",value:"".concat(z,"/").concat(9999===E?"∞":E)},{label:"Total Deals Analyzed",value:h.length},{label:"Avg FlipScore™",value:I||"—"},{label:"Plan",value:U.charAt(0).toUpperCase()+U.slice(1)}].map(e=>(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-white font-bold text-2xl",children:e.value})]},e.label))}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-white font-semibold",children:"Deal History"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[j&&N.length>=2&&(0,a.jsxs)("button",{onClick:()=>k(!0),className:"bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-semibold px-4 py-2 rounded-xl transition-colors",children:["Compare ",N.length," Deals →"]}),(0,a.jsx)("button",{onClick:()=>{v(!j),w([])},className:"text-sm px-4 py-2 rounded-xl border transition-colors ".concat(j?"border-indigo-500 text-indigo-400 bg-indigo-500/10":"border-gray-700 text-gray-400 hover:text-white"),children:j?"✓ Comparing (".concat(N.length,"/3)"):"Compare Deals"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===h.length?(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-12 text-center",children:[(0,a.jsx)("p",{className:"text-4xl mb-3",children:"\uD83D\uDD0D"}),(0,a.jsx)("p",{className:"text-white font-semibold mb-2",children:"No analyses yet"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-5",children:"Paste any Flippa URL to get your first FlipScore™"}),(0,a.jsx)(l.default,{href:"/analyze",className:"bg-indigo-600 hover:bg-indigo-500 text-white font-semibold px-5 py-2.5 rounded-xl transition-colors inline-block",children:"Analyze Your First Deal →"})]}):h.map(e=>{var t;return(0,a.jsx)("div",{onClick:j?()=>{var t;return t=e.id,void w(e=>e.includes(t)?e.filter(e=>e!==t):e.length<3?[...e,t]:e)}:void 0,className:"bg-gray-900 border rounded-xl p-4 transition-all ".concat(j?"cursor-pointer hover:border-indigo-500/50":""," ").concat(N.includes(e.id)?"border-indigo-500 bg-indigo-950/20":"border-gray-800"),children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[j&&(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors ".concat(N.includes(e.id)?"border-indigo-500 bg-indigo-500":"border-gray-600"),children:N.includes(e.id)&&(0,a.jsx)("span",{className:"text-white text-xs",children:"✓"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("h3",{className:"text-white font-medium text-sm truncate",children:e.listing_title||"(Untitled)"}),(0,a.jsx)(c,{score:null!==(t=e.flip_score)&&void 0!==t?t:0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:function(e){let t=Math.floor((Date.now()-new Date(e).getTime())/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?"".concat(t,"d ago"):t<30?"".concat(Math.floor(t/7),"w ago"):"".concat(Math.floor(t/30),"mo ago")}(e.created_at)}),e.asking_price&&(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:d(e.asking_price)}),e.monthly_profit&&(0,a.jsxs)("span",{className:"text-gray-500 text-xs",children:[d(e.monthly_profit),"/mo profit"]}),(0,a.jsx)("span",{className:"text-gray-600 text-xs capitalize",children:e.listing_type||""})]})]}),!j&&(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>P(e.id),disabled:S===e.id,className:"text-gray-500 hover:text-indigo-400 text-xs px-2.5 py-1.5 border border-gray-700 rounded-lg transition-colors disabled:opacity-50",title:D[e.id]?"Link copied!":"Share report",children:S===e.id?"...":D[e.id]?"✓ Copied":"↗ Share"}),(0,a.jsx)("a",{href:e.flippa_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-gray-300 text-xs px-2.5 py-1.5 border border-gray-700 rounded-lg transition-colors",children:"Flippa ↗"})]})]})})]})},e.id)})})]}),"scout"===f&&(0,a.jsx)("div",{className:"space-y-5",children:"free"===U||"starter"===U?(0,a.jsxs)("div",{className:"bg-gray-900 border border-indigo-500/20 rounded-2xl p-10 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83E\uDD16"}),(0,a.jsx)("h3",{className:"text-white font-bold text-xl mb-2",children:"Scout Agent"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"Upgrade to Pro to enable 24/7 automated Flippa monitoring. Get email alerts when high-scoring deals match your criteria."}),(0,a.jsx)(l.default,{href:"/pricing",className:"bg-indigo-600 hover:bg-indigo-500 text-white font-semibold px-6 py-2.5 rounded-xl transition-colors inline-block",children:"Upgrade to Pro →"})]}):(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"Configure Scout Agent"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Scout configuration UI coming soon. Scout is actively running with default settings."})]})})]})]})}},6264:function(e,t,s){"use strict";s.d(t,{S:function(){return r}});var a=s(7107);async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,a.e)(),{data:{session:r}}=await s.auth.getSession(),i=(null==r?void 0:r.access_token)||"";return fetch(e.startsWith("/api/")?e.replace("/api/","/.netlify/functions/"):e,{...t,headers:{"Content-Type":"application/json",...i?{Authorization:"Bearer ".concat(i)}:{},...t.headers}})}},7107:function(e,t,s){"use strict";s.d(t,{A:function(){return l},e:function(){return o}});var a=s(6038),r=s(357);let i=r.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",n=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.placeholder",l=()=>(0,a.createBrowserClient)(i,n),o=()=>(0,a.createBrowserClient)(i,n)},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(231),r=s.n(a)},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[231,38,971,23,744],function(){return e(e.s=5836)}),_N_E=e.O()}]);